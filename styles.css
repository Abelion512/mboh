:root{
      --bg:#0a0c15; --panel:#111427; --card:#141833;
        --text:#e9edff; --muted:#97a0c2; --line:#23264a;
          --accent:#7aa2ff; --accent2:#67e8f9;
            --r:18px; --shadow:0 10px 28px rgba(0,0,0,.35);
            }
            *{box-sizing:border-box} html,body{height:100%}
            body{
              margin:0; color:var(--text);
                background: radial-gradient(1000px 600px at 10% -10%, #141a48 25%, transparent 60%), var(--bg);
                  font:15px/1.5 system-ui, Segoe UI, Roboto, Inter, sans-serif;
                    -webkit-tap-highlight-color: transparent;
                    }
                    .layout{display:flex;min-height:100vh}

                    /* Sidebar */
                    .sidebar{width:230px;background:linear-gradient(180deg,#0e1125,#0a0c18);
                      border-right:1px solid var(--line);padding:14px;position:sticky;top:0;height:100vh}
                      .brand{display:flex;align-items:center;gap:8px;margin-bottom:10px;font-weight:700;color:#d6dcff}
                      .logo{width:26px;height:26px;display:grid;place-items:center;border-radius:9px;
                        background:linear-gradient(225deg,var(--accent),var(--accent2));color:#08101c;font-weight:800}
                        .nav a{display:block;padding:10px;border-radius:12px;color:#aeb3d0;text-decoration:none}
                        .nav a:hover,.nav a.active{background:#181c35;color:#fff}
                        .foot{position:absolute;bottom:12px;left:14px;font-size:12px;color:#6f7696}
                        @media(max-width:900px){ .sidebar{display:none} }

                        /* Main + header layered properly */
                        .main{flex:1;position:relative;z-index:0}
                        .top{position:sticky;top:0;z-index:40;display:flex;justify-content:space-between;align-items:center;gap:8px;padding:12px 16px;border-bottom:1px solid var(--line);background:linear-gradient(180deg,#0c1025,rgba(12,16,37,.85));backdrop-filter:blur(6px)}
                        .hud{display:flex;align-items:center;gap:8px;color:var(--muted)} .dot{width:8px;height:8px;border-radius:50%;background:#4ade80}

                        /* profile menu */
                        .profile{display:flex;align-items:center;gap:8px;position:relative;z-index:45}
                        .icon-btn{border:1px solid var(--line);background:#131736;color:var(--text);border-radius:10px;padding:8px 10px;cursor:pointer}
                        .avatar{background:#2f3a86;border-radius:999px;padding:8px 12px;cursor:pointer;border:1px solid #3a4488}
                        .menu{position:absolute;right:0;top:42px;background:#12162f;border:1px solid #2a2f55;border-radius:14px;min-width:210px;box-shadow:0 20px 40px rgba(0,0,0,.45);z-index:1000}
                        .menu button{display:block;width:100%;text-align:left;background:transparent;border:0;color:#d8dcff;padding:12px 14px;cursor:pointer}
                        .menu button:hover{background:#1a1f41}
                        .menu hr{border:0;border-top:1px solid #2a2f55;margin:6px 0}
                        .menu .danger{color:#ff6b88}

                        /* Landing */
                        .hero{padding:22px;position:relative;z-index:1}
                        .hero h1{font-size:34px;margin:6px 0}
                        .sub{color:var(--muted);margin:6px 0 12px}
                        .cta{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px}
                        .btn{background:#1a1d3d;color:var(--text);border:1px solid var(--line);padding:10px 14px;border-radius:12px;cursor:pointer;text-decoration:none}
                        .btn-accent{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#0b0f1f;border:none;font-weight:700;box-shadow:0 10px 24px rgba(122,162,255,.25)}
                        .grid4{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
                        @media(max-width:900px){ .grid4{grid-template-columns:1fr 1fr} }
                        .card{background:linear-gradient(180deg,var(--card),#10142a);border:1px solid var(--line);border-radius:var(--r);padding:14px;box-shadow:var(--shadow)}
                        .glow{height:240px;border:1px solid var(--line);border-radius:20px;margin-top:14px;
                          background:
                            radial-gradient(closest-side at 65% 35%, rgba(122,162,255,.25), transparent 60%),
                              radial-gradient(closest-side at 35% 65%, rgba(103,232,249,.2), transparent 65%),
                                radial-gradient(closest-side,#0d1333,#0a0e1f)}

                                /* Outlet */
                                .outlet{padding:16px}

                                /* Segmented control (mode chat) */
                                .segmented{display:inline-flex;background:#141736;border:1px solid var(--line);border-radius:12px;overflow:hidden}
                                .segmented button{padding:8px 10px;border:0;background:transparent;color:#c1c8ea;cursor:pointer}
                                .segmented button.active{background:#1b1f42;color:#fff}

                                /* Chat */
                                .chat-card{padding:0}
                                .chat-header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--line);
                                  background:linear-gradient(180deg,#121734,#0f1329)}
                                  .chat-id{display:flex;align-items:center;gap:10px}
                                  .chat-avatar{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#2d3570;font-weight:700}
                                  .chat-meta{font-size:12px;color:#67e8f9}
                                  .chat-log{max-height:60vh;overflow:auto;display:flex;flex-direction:column;gap:10px;padding:12px}
                                  .msg{padding:10px 12px;border-radius:12px;max-width:92%}
                                  .msg.user{background:#171a3f;align-self:flex-end}
                                  .msg.bot{background:#10142e;border:1px solid #202455;align-self:flex-start}
                                  .chat-input{display:flex;gap:8px;padding:12px;border-top:1px solid var(--line);background:#0f122a}
                                  .in{width:100%;background:#0f1126;color:var(--text);border:1px solid var(--line);padding:10px 12px;border-radius:12px}

                                  /* Toast */
                                  #toastHost{position:fixed;right:10px;bottom:10px;display:flex;flex-direction:column;gap:8px;z-index:1200}
                                  .toast{background:#12162f;color:#e9edff;border:1px solid #2a2f55;border-radius:10px;padding:10px 12px; box-shadow:var(--shadow); max-width:80vw}
                                  .toast.ok{border-color:#3a7cff} .toast.err{border-color:#ff6b88}

                                  /* Skeleton shimmer */
                                  .skeleton{position:relative;background:#0f122a;border:1px solid #1e2244;color:transparent}
                                  .skeleton::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.07),transparent);animation:shine 1.1s linear infinite}
                                  @keyframes shine{from{transform:translateX(-100%)}to{transform:translateX(100%)}}

                                  /* Table / badges */
                                  .table{width:100%;border-collapse:collapse}
                                  .table th,.table td{border-bottom:1px solid var(--line);padding:10px;text-align:left}
                                  .badge{font-size:12px;color:#ccd2ff;background:#1a1f3f;padding:4px 8px;border-radius:999px;border:1px solid #2a2f55}
                                  .small{font-size:12px;color:#97a0c2}
                                  .btn-ghost{background:transparent;border:1px solid var(--line);color:var(--text);cursor:pointer}
                                  .btn-ghost:hover{background:#151a37}

                                  /* Journal / Knowledge */
                                  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:flex-end}
                                  .input-sm{padding:8px 10px;border-radius:10px;border:1px solid var(--line);background:#0f1126;color:var(--text)}
                                  textarea.in{min-height:110px;resize:vertical}
                                  .chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
                                  .chip{font-size:12px;background:#1a2148;border:1px solid #2a2f63;color:#cfe2ff;padding:4px 8px;border-radius:999px}
                                  .spark{display:flex;gap:3px;align-items:flex-end;height:32px}
                                  .spark div{width:14px;background:linear-gradient(180deg,#6aa8ff,#3a5bd9);border-radius:4px 4px 0 0;opacity:.9}
                                  .uploader{border:1px dashed #2a2f63;border-radius:12px;padding:12px;background:#0f132a}
                                  .filelist{display:grid;grid-template-columns:1fr auto;gap:6px;margin-top:8px}
                                  .fileitem{display:flex;gap:8px;align-items:center}
                                  .kres{display:flex;flex-direction:column;gap:10px;margin-top:10px}
                                  .snip{background:#0f122a;border:1px solid #1e2349;border-radius:10px;padding:10px}
                                  .snip mark{background:#2b3b7a;color:#e9edff;padding:0 2px;border-radius:3px}

                                  /* Modal & loader */
                                  .modal{border:0;background:transparent;z-index:1100}
                                  .modal-card{background:#12162f;border:1px solid #2a2f55;border-radius:18px;padding:16px;min-width:280px;max-width:420px;color:#e9edff}
                                  .modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
                                  .release{background:#0f152f;border:1px solid #243060;border-radius:12px;padding:10px}

                                  /* Update loader */
                                  .loader{position:fixed;inset:0;background:rgba(8,10,24,.55);backdrop-filter:blur(6px);
                                    display:grid;place-items:center;z-index:1300}
                                    .loader-card{background:#12162f;border:1px solid #2a2f55;border-radius:18px;padding:16px 16px 12px;
                                      min-width:280px;max-width:420px;color:#e9edff;box-shadow:0 20px 50px rgba(0,0,0,.45)}
                                      .loader-head{display:flex;align-items:center;gap:8px;margin-bottom:8px}
                                      .progress-wrap{height:12px;background:#0e1330;border:1px solid #253060;border-radius:999px;overflow:hidden;margin:8px 0}
                                      .progress-bar{height:100%;background:linear-gradient(90deg,#7aa2ff,#67e8f9);border-radius:999px;box-shadow:0 0 20px rgba(122,162,255,.35)}
                                      .loader-foot{display:flex;justify-content:space-between;align-items:center;margin-top:4px}

                                      /* Motion */
                                      @media (prefers-reduced-motion:no-preference){
                                        .card{transition:transform .18s ease, border-color .18s ease}
                                          .card:hover{transform:translateY(-2px);border-color:#2a2f63}
                                          }
}